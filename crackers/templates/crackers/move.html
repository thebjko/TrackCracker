{% extends 'base.html' %}

{% block content %}
<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item" aria-current="page"><a href="{% url 'tracks:move_objective' current_task.pk %}">Top</a></li>
    {% for crumb in breadcrumb %}
    {% if forloop.last %}
    <li class="breadcrumb-item active" aria-current="page">{{ crumb.title }}</li>
    {% else %}
    <li class="breadcrumb-item"><a href="{% url 'tracks:move_task' current_task.pk crumb.pk %}">{{ crumb.title }}</a></li>
    {% endif %}
    {% endfor %}
  </ol>
</nav>

<h1>Move Task {{ current_task.title }}</h1>
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Task</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr>
      <td><a href="{% url 'tracks:move_task' current_task.pk task.pk %}">{{ task.title }}</a></td>
    </tr>
    {% empty %}
    <tr>
      <td>Subtask does not exist.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<div class="d-flex justify-content-end">
  {% if target_pk %}
  <form action="{% url 'tracks:move_task' current_task.pk target_pk %}" method="post" class="mx-3">
    {% csrf_token %}
    <button type="submit" class="btn btn-link">Move Here</button>
  </form>
  {% endif %}
  <form action="{% url 'tracks:move_objective' current_task.pk %}" method="post" class="ms-3">
    {% csrf_token %}
    <button type="submit" class="btn btn-link">Set as an Objective</button>
  </form>
</div>
{% endblock content %}
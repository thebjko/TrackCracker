{% extends 'base.html' %}

{% block content %}
<h1>{{ title }}</h1>
{% with form.instance as instance %}
<form hx-put="{% url 'tracks:update' instance.pk %}" hx-include="[name='_path']">
  <input type="hidden" name="_path" value={{ path }}>
  {% with form.title as title %}
  <div class="form-group">
    <label for="{{ title.id_for_label }}">{{ title.label }}</label>
    <input autofocus required type="{{ title.field.widget.input_type }}" class="form-control" value="{{ instance.title }}" placeholder="{{ title.label }}" name="{{ title.name }}" />
  </div>
  {% endwith %}
  
  {% with form.description as description %}
  <div class="form-group">
    <label for="{{ description.id_for_label }}">{{ description.label }}</label>
    <textarea id="{{ description.id_for_label }}" class="form-control" placeholder="{{ description.label }}" name="{{ description.name }}">{{ instance.description }}</textarea>
  </div>
  {% endwith %}

  {% with form.proportion as proportion %}
  <div class="form-group">
    <label for="{{ proportion.id_for_label }}">{{ proportion.label }} </label>
    <input required type="{{ proportion.field.widget.input_type }}" class="form-control" placeholder="{{ proportion.label }}" name="{{ proportion.name }}" value={{ instance.proportion }}/>
  </div>
  {% endwith %}

  {% with form.accumulative as accumulative %}
  <div class="form-check">
    <label class="form-check-label" for="{{ accumulative.id_for_label }}">{{ accumulative.label }} </label>
    <input class="form-check-input" type="{{ accumulative.field.widget.input_type }}" name="{{ accumulative.name }}" id="{{ accumulative.id_for_label }}" {% if instance.accumulative %}checked{% endif %}>
    {% comment %} <p class="my-1 d-inline-block"> ğŸ‘ˆ ì„œë¸ŒíƒœìŠ¤í¬ì˜ ë¹„ì¤‘ì„ ëˆ„ì ìœ¼ë¡œ ì…ë ¥í•˜ê¸° ìœ„í•´ ì²´í¬í•˜ì„¸ìš”.</p> {% endcomment %}
    <p class="my-1">ì²´í¬í•˜ì‹œë©´, ì˜ˆë¥¼ ë“¤ì–´, ì±…ì˜ ì§„í–‰ë¥ ì„ ì…ë ¥í•  ë•Œ, ì´ì „ ì±•í„°ì˜ í˜ì´ì§€ë¥¼ ëº„ í•„ìš” ì—†ì´ ê·¸ëŒ€ë¡œ ì…ë ¥í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <p class="my-1 mb-3">ex. ì±•í„° 1 â†’ 35pgê¹Œì§€, ì±•í„° 2 â†’ 60pgê¹Œì§€ì¸ ê²½ìš°, ì±•í„° 1ì— 35, ì±•í„° 2ì— 25ë¥¼ ì…ë ¥í•  í•„ìš” ì—†ì´ ê·¸ëŒ€ë¡œ 35, 60ìœ¼ë¡œ ì…ë ¥ê°€ëŠ¥.</p>
  </div>
  {% endwith %}
  
  {% with form.start as start %}
  {% if instance.accumulative %}
  <div id="{{ start.id_for_label }}" class="form-group">
  {% else %}
  <div id="{{ start.id_for_label }}" class="form-group d-none">
  {% endif %}
    <label for="{{ start.id_for_label }}">{{ start.label }} ğŸ‘ˆ ì„œë¸ŒíƒœìŠ¤í¬ì˜ ë¹„ì¤‘ì„ ëˆ„ì ìœ¼ë¡œ ì…ë ¥í•˜ëŠ” ê²½ìš°, ì‹œì‘ì ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</label>
    <input required type="{{ start.field.widget.input_type }}" class="form-control" placeholder="{{ start.label }}" name="{{ start.name }}" value="{{ instance.start }}" />
    <p class="my-1 mb-3">ì˜ˆë¥¼ ë“¤ì–´, 36í˜ì´ì§€ë¶€í„° ì‹œì‘í•˜ëŠ” ì±•í„° 2ì˜ ì„œë¸ŒíƒœìŠ¤í¬ë¥¼ ë§Œë“¤ ë•Œ, ì‹œì‘ì ì„ 36ìœ¼ë¡œ ì…ë ¥í•˜ì‹œë©´ 40í˜ì´ì§€ê¹Œì§€ì¸ ì„¹ì…˜ 2.1, 50í˜ì´ì§€ê¹Œì§€ì¸ 2.2, 60í˜ì´ì§€ê¹Œì§€ì¸ 2.3ì˜ ë¹„ì¤‘ì„ ê³„ì‚°í•  í•„ìš” ì—†ì´ ê·¸ëŒ€ë¡œ ì…ë ¥í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  </div>
  {% endwith %}

  <button class="btn btn-primary" type="submit">UPDATE</button>
</form>
{% endwith %}
<script>
  const accumulative = document.getElementById('{{ form.accumulative.id_for_label }}')
  const start = document.getElementById('{{ form.start.id_for_label }}')
  accumulative.addEventListener('click', (e) => {
    start.classList.toggle('d-none')
  })
</script>
{% endblock content %}